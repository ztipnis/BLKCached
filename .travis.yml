os: linux
dist: xenial
sudo: false
language: cpp
compiler: gcc
addons:
  apt:
    update: true
    sources:
      - sourceline: "deb http://us-east-1.ec2.archive.ubuntu.com/ubuntu cosmic main universe InRelease"
      - ubuntu-toolchain-r-test
    packages:
      - libboost-program-options-dev
      - libboost-filesystem-dev
      - doxygen
      - libpmemblk-dev
      - libtbb-dev
      - python3-sphinx
cache:
  apt: true

script:
  - pip3 install breathe
  - mkdir build
  - cd build
  - cmake ..
  - make

deploy:
  provider: pages
  skip_cleanup: true
  local_dir: build/docs/docs/sphinx
  github_token: $API_TOKEN
  on:
    branch: master

